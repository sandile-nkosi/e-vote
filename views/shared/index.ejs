<%- include('./partials/head', { pageTitle: 'E-Vote Home' }) %>
<link rel="stylesheet" href="/styles/progress-bar.css">
<link rel="stylesheet" href="/styles/candidates.css">
<script src="https://js.pusher.com/8.2.0/pusher.min.js" defer></script>
<script src="/scripts/real-time.js" defer></script>
</head>
<body>
  <main>
    <h1>Candidates and Results</h1>
      <h2 id="votesTotal">Votes cast: <%= votesTotal %></h2>
      <ul id="candidates-grid">
        <% for (const candidate of candidates) { %>
        <li id="candidate-<%= candidate._id %>">
          <article class="candidate-item">
            <img src="<%= candidate.imageUrl %>" alt="<%= candidate.fullName %>">
            <div class="candidate-item-content">
              <h2><%= candidate.fullName %></h2>
              <div class="candidate-item-actions">
                <h3><%= candidate.politicalParty %></h3>
                <p class="nationalVotes">Total National votes: <%= candidate.nationalVotes %></p>
                <p>
                  <%- include('./partials/progress-bar', { candidate }) %>
                </p>
                <p class="provincialVotes">Total Provincial votes: <%= candidate.provincialVotes %></p>
              </div>
            </div>
          </article>
        </li>
        <% } %>
      </ul>
  </main>
<%- include('./partials/footer') %>

